@page "/post/{id:int}"
@using Tobiso.Web.Shared.DTOs
@using Markdig
@inject Tobiso.Web.Shared.Interfaces.ITobisoWebApi Api
@inject NavigationManager Navigation
<style>
    .sidebar {
        display: none;
    }
</style>
<PageTitle>Blogový post</PageTitle>

@if (post == null)
{
    <p>Načítám...</p>
}
else
{
    <button class="btn btn-secondary mb-3" @onclick="BackToList">Zpět na seznam</button>
    <h2>@post.Title</h2>
    <div class="mb-4">
        @((MarkupString)Markdig.Markdown.ToHtml(post.Content))
    </div>
}

@code {
    [Parameter]
    public int id { get; set; }
    private PostResponse? post;

    protected override async Task OnInitializedAsync()
    {
        post = await Api.GetPostById(id);
    }

    private void BackToList()
    {
        Navigation.NavigateTo("/posts-incognito");
    }
}

